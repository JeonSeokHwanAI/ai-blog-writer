# 페르소나 관리

인자: $ARGUMENTS

AI Blog Writer의 핵심 기능입니다. 블로그 글쓰기에 사용할 페르소나를 생성, 등록, 관리합니다.
기본 페르소나: AI 블로그 작가 (이 프로젝트의 제작자)

## 사용법 분기

**인자 분석:**
- 인자 없음 → 활성 페르소나 표시 + 사용법 안내
- `list` → 등록된 페르소나 목록
- `create <이름>` → 새 페르소나 직접 생성 (인터뷰 방식)
- `<블로그ID>` → 블로그 분석 → 페르소나 자동 생성
- `use <이름>` → 해당 페르소나로 빙의 (활성화)
- `update <이름>` → 페르소나 수정/재분석
- `delete <이름>` → 페르소나 삭제
- `style` → 현재 활성 페르소나 스타일 요약

**이름 매칭:** `config/personas/` 폴더에서 파일명(확장자 제외)으로 검색. 부분 매칭 지원.

## 저장 구조

```
config/
├── personas/                    # 페르소나별 JSON 파일
│   ├── AI블로그작가.json
│   └── ...
├── .active_persona.json         # 현재 활성 페르소나
```

### 페르소나 JSON 형식

```json
{
  "name": "페르소나명",
  "blog_id": "블로그ID (블로그 기반일 때)",
  "blog_name": "블로그명",
  "blog_url": "https://blog.naver.com/...",
  "created_at": "2026-02-12T00:00:00",
  "updated_at": "2026-02-12T00:00:00",
  "source": "blog_analysis | interview | manual",
  "profile": {
    "nickname": "닉네임",
    "intro": "한 줄 소개",
    "topics": ["주제1", "주제2"]
  },
  "style": {
    "tone": "글쓰기 톤 설명",
    "formality": "습니다체/요체/혼용",
    "writing_patterns": ["패턴1", "패턴2"],
    "favorite_expressions": ["표현1", "표현2"],
    "content_structure": "글 구조",
    "emoji_usage": "없음/적음/보통/많음",
    "average_length": 2000
  },
  "persona": "페르소나 설명 문장",
  "voice_samples": ["샘플 문장1", "샘플 문장2"],
  "content_themes": {
    "main": "메인 주제",
    "sub": ["서브1", "서브2"]
  },
  "context_file": "docs/context/페르소나파일.md (있으면)"
}
```

### 활성 페르소나 파일

`config/.active_persona.json`:
```json
{
  "active": "AI블로그작가",
  "activated_at": "2026-02-12T00:00:00"
}
```

---

## 실행 방법

### 1. 현재 상태 표시 (인자 없음)

`config/.active_persona.json` 확인:
- 활성 페르소나 있음 → 해당 페르소나 정보 표시
- 없음 → 등록 안내

```
## 현재 활성 페르소나: AI블로그작가

| 항목 | 내용 |
|------|------|
| 닉네임 | AI 블로그 작가 |
| 톤 | 습니다체 기본, 요체 포인트 |
| 구조 | 도입(경험) → 본문(단계별) → 마무리(격려) |
| 블로그 | zeroenter (지식의 대장장이) |

---
💡 `/persona list` - 전체 목록
💡 `/persona create <이름>` - 새로 만들기
💡 `/persona <블로그ID>` - 블로그 분석으로 생성
```

### 2. 목록 표시 (`list`)

`config/personas/` 폴더의 JSON 파일 목록:

```
## 등록된 페르소나 (N개)

| # | 이름 | 닉네임 | 소스 | 활성 |
|---|------|--------|------|------|
| 1 | AI블로그작가 | AI 블로그 작가 | 블로그 분석 | ✅ |

---
💡 `/persona use <이름>` - 페르소나 전환
```

### 3. 새 페르소나 직접 생성 (`create <이름>`)

`docs/context/페르소나 만들기 - Claude 프롬프트.md`를 참조하여 인터뷰 방식으로 페르소나를 생성합니다.

**인터뷰어 역할:** Claude는 인터뷰어가 되어 한 섹터씩 질문합니다.

**핵심 규칙:**
- AskUserQuestion 도구를 사용하지 않고 텍스트로 질문합니다
- 한 번에 하나의 섹터만 진행합니다
- 각 섹터마다 질문은 Q1, Q2 형식으로 번호를 붙입니다
- 사용자 답변 후 평가하고, 좋은 방향이 있으면 제시한 뒤 다음 섹터로 넘어갑니다
- 페르소나명을 확인한 후부터는 이름을 사용하여 질문합니다

**인터뷰 진행 순서 (8개 섹터):**

```
## 페르소나 인터뷰 시작: <이름>

지금부터 당신만의 페르소나를 만들기 위한 인터뷰를 진행합니다.
총 8개 섹터의 질문을 하나씩 드리고, 답변에 대한 피드백을 드린 후 다음으로 넘어갑니다.

편하게 답해주세요. 짧게 키워드만 답해도 되고, 길게 설명해도 됩니다.
잘 모르겠는 질문은 "패스"하셔도 됩니다. 제가 적절히 채워드립니다.
```

**섹터 1. 기본 정보**
- Q1. 활동 영역은 어디인가요?
  - 예: 블로그 / 유튜브 / 인스타그램 / 뉴스레터 / 브런치 / 여러 채널 병행
- Q2. 전문 분야는 무엇인가요?
  - 예: 요리연구가 / IT개발자 / 육아맘 / 부동산 투자 / 웹툰작가 / 뷰티 크리에이터 / 여행블로거 / 재테크 / 독서 / 자기계발 / 반려동물 / 인테리어 / 다이어트·건강

**섹터 2. 핵심 정체성**
- Q1. <이름>으로서 독자에게 어떤 존재이고 싶으신가요?
  - 예: 멘토(이끌어주는) / 선배(경험 나누는) / 동료(함께 성장하는) / 전문가(깊이 있는) / 친구(편한) / 코치(실행을 돕는) / 큐레이터(골라주는) / 분석가(데이터 기반)
- Q2. 이 분야를 대하는 나만의 철학이나 신념이 있다면?
  - 예: "꾸준함이 답이다" / "즐거움이 최고" / "본질에 집중" / "실행이 먼저" / "누구나 할 수 있다" / "작은 것부터 시작" / "완벽보다 완성"

**섹터 3. 콘텐츠 스타일**
- Q1. 선호하는 글쓰기 톤은?
  - 예: 전문적이고 신뢰감 있는 / 친근하고 편안한 / 유머러스하고 재밌는 / 감성적이고 따뜻한 / 직설적이고 시원한 / 차분하고 조곤조곤한 / 열정적이고 에너지 넘치는
- Q2. 글에 주로 어떤 소재를 활용하시나요?
  - 예: 내 경험담·실패담 / 전문 데이터·통계 / 실제 사례·케이스 / 비유·스토리텔링 / 다른 사람 인터뷰 / 책·영상 인용 / 일상 에피소드 / before-after 비교

**섹터 4. 타겟 독자**
- Q1. 주요 독자층은 누구인가요?
  - 예: 20대 사회초년생 / 30대 워킹맘 / 블로그 초보자 / 투자에 관심 있는 직장인 / 이직 준비생 / 소상공인 / 은퇴 준비자 / 대학생 / 프리랜서 / 부업을 찾는 사람
- Q2. 그들이 겪는 가장 큰 고민이나 어려움은?
  - 예: "어디서부터 시작해야 할지 모르겠다" / "시간이 없다" / "정보가 너무 많아 혼란" / "실패가 두렵다" / "꾸준히 못 한다" / "돈이 부족하다" / "혼자라서 외롭다"

**섹터 5. 콘텐츠 주제 영역**
- Q1. 주로 다루고 싶은 주제는? (2~3가지)
  - 예: 블로그 운영 노하우 / 재테크·투자 / 맛집·카페 / 자기계발 / 육아 일상 / IT·코딩 / 요리 레시피 / 여행기 / 독서 리뷰 / 다이어트 / 패션·뷰티 / 부업·N잡 / 인테리어 / 반려동물
- Q2. 반대로 다루지 않을 주제가 있다면?
  - 예: 정치 / 종교 / 논쟁적 이슈 / 자극적 콘텐츠 / 특정 브랜드 비방 / 없음

**섹터 6. 콘텐츠 목표와 가치**
- Q1. 독자가 콘텐츠를 읽고 어떤 변화나 행동을 했으면 하나요?
  - 예: "나도 해볼 수 있겠다" 자신감 / 바로 실행에 옮기기 / 새로운 시각 얻기 / 위로와 공감 받기 / 유용한 정보 얻어가기 / 습관 만들기 / 돈 아끼거나 벌기
- Q2. 전달하고 싶은 핵심 가치는?
  - 예: 실행력 / 효율 / 성장 / 즐거움 / 본질 / 진정성 / 균형 / 자유 / 연결 / 도전 / 나다움

**섹터 7. 독자와의 관계 설정**
- Q1. 독자와 어떤 관계를 맺고 싶으신가요?
  - 예: 코치-선수(목표 달성 돕기) / 선배-후배(경험 전수) / 동료-동료(함께 성장) / 친구-친구(편하게 수다) / 전문가-고객(솔루션 제공) / 이웃-이웃(일상 나누기)
- Q2. 독자에게 어떤 느낌을 주고 싶으신가요?
  - 예: 믿음직한 / 따뜻한 / 재밌는 / 똑부러진 / 편안한 형·언니 같은 / 에너지 넘치는 / 차분한 / 영감을 주는 / 솔직한

**섹터 8. 차별화 포인트**
- Q1. 다른 콘텐츠와 비교했을 때 <이름>만의 강점은?
  - 예: 현직 경험 기반 / 독특한 시각 / 실패담을 솔직하게 공유 / 어려운 걸 쉽게 설명 / 데이터 분석 능력 / 유머 감각 / 꾸준한 기록 / 다양한 분야 경험 / 잘 모르겠다
- Q2. 실무 경험, 성과, 배경 중 활용할 만한 것은?
  - 예: 00년차 경력 / 자격증·학위 / 수익화 경험 / 전직 경험 / 특정 프로젝트 / 해외 경험 / 수상 이력 / 독학으로 성장 / 특별히 없다

**섹터 8 심화 (사용자가 차별화 포인트를 모를 때):**

사용자가 "잘 모르겠다" 또는 "특별히 없다"고 답하면 심층 인터뷰를 추가 진행합니다:

- Part A. 경험: 이 분야를 시작한 계기는? / 가장 기억에 남는 성과나 프로젝트는? / 가장 큰 실패와 거기서 배운 교훈은?
- Part B. 나만의 방식: 남들과 다르게 하는 것이 있다면? / 주변에서 자주 듣는 강점은? / 절대 타협하지 않는 원칙이 있다면?
- Part C. 개인적 배경: 이 분야 외에 다른 경험이나 배경이 있다면? / 자신을 한 문장으로 소개한다면?

**마지막 질문 (필수):**
- 블로그 자기소개 문구 또는 평소 자주 쓰는 소개 표현이 있다면 알려주세요.
  - 예: "오늘도 한 줄의 기록으로 성장합니다" / "당신의 시간을 아껴드립니다" / "작은 실천이 큰 변화를 만듭니다" / 아직 없어요

**인터뷰 완료 후:**

1. **차별화 포인트 정리표** 출력

```
## <이름> 차별화 포인트

| 강점 | 설명 |
|------|------|
| ... | ... |
```

2. **페르소나 문서 생성 (필수)**: `docs/context/페르소나 - <이름>.md`
   - 인터뷰 결과를 마크다운 형식으로 정리
   - 기본 정보, 페르소나 설명, 글쓰기 스타일, 목소리 샘플 포함
3. **페르소나 JSON 생성**: `config/personas/<이름>.json`
   - source: "interview"
   - **context_file**: "docs/context/페르소나 - <이름>.md" (반드시 경로 저장)
4. **자동 활성화**: `config/.active_persona.json` 업데이트

5. **안내 메시지 출력 (필수):**
```
---
블로그가 있으신가요?
`/persona <내블로그ID>`로 내 글을 분석하면 실제 글쓰기 스타일까지 반영된 완벽한 페르소나가 됩니다.

블로그 자기소개서를 작성해서 알려주셔도 좋습니다.
당신이 주는 정보가 많을수록, 더 정확한 페르소나가 만들어집니다.
```

### 4. 블로그 분석으로 생성 (`<블로그ID>`)

1. **블로그 정보 수집** (스크래핑)
   - `config/blogs.json`에서 ID 매칭
   - 없으면 직접 스크래핑 실행

2. **기존 데이터 확인**
   - `output/{blog_id}/` 폴더의 최신 데이터 사용
   - 없으면 20개 포스트 스크래핑

3. **스타일 분석** (Claude가 직접 분석)
   - 글쓰기 톤 (격식체/반말체/혼합)
   - 자주 쓰는 표현
   - 문장 구조 패턴
   - 이모지/특수문자 사용 빈도
   - 평균 글 길이
   - 콘텐츠 구조

4. **페르소나 생성**
   - `config/personas/<페르소나명>.json` 저장 (source: "blog_analysis")
   - 페르소나명은 블로그 닉네임 또는 사용자 지정

5. **페르소나 문서 생성 (필수)**: `docs/context/페르소나 - <페르소나명>.md`
   - 분석 결과를 마크다운 형식으로 정리
   - JSON의 **context_file** 필드에 경로 저장

6. **활성화 여부 질문**
   ```
   페르소나 "AI블로그작가"가 생성되었습니다.
   이 페르소나로 빙의할까요? (현재: 없음)
   ```

### 5. 페르소나 전환 (`use <이름>`)

`config/.active_persona.json` 업데이트:

```
## 페르소나 전환 완료

| 항목 | 이전 | 현재 |
|------|------|------|
| 페르소나 | 셀슈머 | AI블로그작가 |
| 닉네임 | 셀슈머 | AI 블로그 작가 |

앞으로 글쓰기 요청 시 이 스타일로 작성합니다.
```

### 6. 페르소나 수정 (`update <이름>`)

**블로그 기반 페르소나 (source: blog_analysis):**
- 최신 글을 다시 수집하고 재분석
- 변경 사항 비교 후 적용

**직접 생성 페르소나 (source: manual):**
- 수정할 항목 질문 (텍스트)
- 해당 항목만 업데이트

### 7. 페르소나 삭제 (`delete <이름>`)

- `config/personas/<이름>.json` 삭제
- 활성 페르소나였으면 `.active_persona.json`도 초기화
- 삭제 전 확인 질문

### 8. 스타일 요약 (`style`)

현재 활성 페르소나의 스타일만 간단히 표시:

```
## 현재 빙의 스타일: AI블로그작가

| 항목 | 내용 |
|------|------|
| 톤 | 습니다체 기본, 요체 포인트 |
| 패턴 | ~습니다, ~거든요(포인트), ~더라고요(경험) |
| 구조 | 도입(경험) → 본문(단계별) → 마무리(격려) |
| 표현 | "제가 직접", "진짜 이유", "마무리하며" |
| 길이 | 평균 2,400자 |
| 페르소나 | 20년 경력 개발자 출신 AI 블로그 작가... |
```

---

## 활성 페르소나 연동

활성 페르소나가 설정되면 다른 스킬에서 자동 참조:

| 스킬 | 연동 방식 |
|------|-----------|
| `/write` | 활성 페르소나의 style, persona로 글 작성 |
| `/review` | 활성 페르소나의 블로그를 "내 블로그"로 인식 |
| `/bridge` | 활성 페르소나의 주제 기반 브릿지 생성 |

**참조 방법:** `config/.active_persona.json` → `config/personas/{name}.json` 읽기

---

## 중요 사항

- **AskUserQuestion 도구를 사용하지 마세요.** 텍스트로 질문하고 사용자 입력을 기다립니다.
- 페르소나 생성/전환 시에만 대기, 그 외는 바로 실행합니다.
- `config/me.json`은 하위 호환용으로 유지하되, 새 시스템은 `config/personas/`를 사용합니다.

## 참조 파일

- `config/personas/`: 페르소나 JSON 파일들
- `config/.active_persona.json`: 현재 활성 페르소나
- `config/me.json`: 레거시 (하위 호환)
- `docs/context/페르소나 만들기 - Claude 프롬프트.md`: 인터뷰 프롬프트 원본
- `docs/context/페르소나 - {이름}.md`: 페르소나 상세 문서
- `output/{blog_id}/`: 스크래핑 결과
