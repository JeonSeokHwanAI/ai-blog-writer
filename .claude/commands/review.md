# 블로그 분석 리뷰

인자: $ARGUMENTS

수집된 데이터로 블로그 분석을 진행합니다.

## 인자 파싱 (최우선)

인자가 있으면 단계를 건너뛰고 바로 실행합니다.

**패턴:**
- `<별명/ID> <포스트번호>` → 해당 블로그의 특정 포스트 바로 분석
  - 예: `/review 비움 00` → hhey0510의 00번 포스트 특정글분석
- `<별명/ID> <수량>` → 해당 블로그의 포스트 N개 목록 표시 후 번호 선택 대기
  - 예: `/review 비움 5` → hhey0510의 포스트 5개 목록 표시
- `<별명/ID> 0` → 해당 블로그 전체분석 바로 실행
  - 예: `/review 비움 0` → hhey0510 전체분석
- `<별명/ID> <포스트번호> 댓글` → **댓글만 바로 생성** (분석 생략)
  - 예: `/review 리리 00 댓글` → 00번 포스트 댓글만 출력
- `<별명/ID> 댓글` → 최신 포스트 댓글만 바로 생성
  - 예: `/review 리리 댓글` → 최신 글 댓글만 출력
- `<별명/ID>` → 해당 블로그 선택 후 분석 유형 선택 대기
- 인자 없음 → 아래 "자동 연결" 로직 실행

**별명/ID 매칭:** `config/blogs.json`에서 ID, name, nickname, description 순으로 검색.

## 자동 연결 (인자 없음일 때)

`/review`만 실행했을 때, 직전 `/search` 결과를 자동으로 이어받습니다.

**판단 기준:** `config/.last_search.json` 파일 확인
- 파일 있음 → 해당 blog_id의 **최신** summary/posts 파일 자동 선택
  - 포스트 1개 → **질문 없이** 바로 특정글분석 실행
  - 포스트 2~5개 → 포스트 목록 표시 후 번호 선택 대기
  - 포스트 6개 이상 → 분석 유형 선택 대기 (0: 전체분석, 또는 포스트 번호)
- 파일 없음 → 계정 목록 표시 (기존 흐름)

## 실행 흐름 (자동 연결 불가 시)

### 1단계: 계정 목록 표시

output 폴더의 계정(폴더)을 번호와 함께 마크다운 표로 출력합니다.
계정 폴더 목록 조회 시 `_old` 등 `_`로 시작하는 폴더는 제외합니다.

| 번호 | 계정(블로그 ID) |
|------|-----------------|
| 1    | 980207          |
| 2    | shootingday     |

그리고 "계정 번호를 입력하세요:" 출력 후 대기.

### 2단계: 분석 유형 선택

사용자가 계정 번호를 입력하면:

```
분석 유형을 선택하세요:
- 0: 전체분석 (12개 항목)
- 1~50: 해당 수량만큼 포스트 목록 표시

입력:
```

그리고 대기.

### 3단계: 분기 처리

**"0" 입력 시 → 전체분석:**
- 해당 계정의 최신 `*_summary_*.json` 파일을 읽습니다
- `_guide`의 "전체분석" 형식(12개 항목)으로 블로그 전체를 분석합니다
- 12개 항목: 콘텐츠장단점, 운영자문제점, SEO개선점, 전략제안, 타겟독자, 브랜딩, 발행패턴, 제목패턴, 수익화, 경쟁환경, AI대응력, 독자참여도

**"1~50" 입력 시 → 포스트 목록:**
- 해당 계정의 최신 `*_summary_*.json` 파일에서 입력한 수량만큼 포스트 목록 표시

| 번호 | 제목 | 날짜 |
|------|------|------|
| 00   | 제목1 | 02/10 |
| 01   | 제목2 | 02/09 |

그리고 "분석할 포스트 번호를 입력하세요 (예: 00, 01):" 출력 후 대기.

### 4단계: 특정글 분석

포스트 번호가 결정되면:
- 해당 계정의 최신 `*_posts_*.json` 파일에서 해당 index의 포스트 본문을 읽습니다
- `_guide`의 "특정글분석" 형식으로 심층 분석합니다
- 8개 섹션: 콘텐츠 구조 분석, 강점 4가지, 약점 및 개선점, SEO 분석, 독자 반응 예측, 종합 평가, 총평, 추천 댓글
- **8. 추천 댓글**: 블로그 작성자에게 남길 댓글 (강점 언급 + 공감 + 후속 콘텐츠 기대)

## 댓글만 생성 모드

인자에 `댓글`이 포함되면 분석을 생략하고 **추천 댓글만** 바로 출력합니다.

**실행 흐름:**
1. 해당 블로그의 최신 `*_posts_*.json` 파일에서 본문 읽기
2. 본문을 바탕으로 추천 댓글 생성
3. 댓글만 출력 (분석 8개 섹션 생략)

**댓글 작성 가이드:**
- 글의 강점 1~2개 구체적으로 언급
- 공감 표현 (개인 경험 또는 감정)
- 후속 콘텐츠에 대한 기대감
- 자연스러운 어조 (과도한 칭찬 지양)
- 2~4문장 적정 길이

**출력 형식:**
```
## 추천 댓글

---
[댓글 내용 - 인용 블록(>) 없이 평문으로 출력하여 복사하기 쉽게]
---

📝 글 제목: [제목]
🔗 [글 링크](URL)
```

**중요:** 댓글 내용은 `>` 인용 블록 없이 평문으로 출력하여 바로 복사할 수 있게 합니다.

## 중요 사항

- **AskUserQuestion 도구를 사용하지 마세요.** 텍스트로 질문하고 사용자 입력을 기다립니다.
- 사용자 입력이 필요한 단계에서만 대기합니다.
- **자동 연결이 가능하면 질문 없이 바로 분석을 시작합니다.**
